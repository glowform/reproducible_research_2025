<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jakub Michańków (based on materials by Wojciech Hardy">
<meta name="dcterms.date" content="2024-05-29">

<title>Reproducible Research</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Reproducible Environments_files/libs/clipboard/clipboard.min.js"></script>
<script src="Reproducible Environments_files/libs/quarto-html/quarto.js"></script>
<script src="Reproducible Environments_files/libs/quarto-html/popper.min.js"></script>
<script src="Reproducible Environments_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Reproducible Environments_files/libs/quarto-html/anchor.min.js"></script>
<link href="Reproducible Environments_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Reproducible Environments_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="Reproducible Environments_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="Reproducible Environments_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Reproducible Environments_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Reproducible Environments_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="Reproducible Environments_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body>

<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Reproducible Research</h1>
            <p class="subtitle lead">Reproducible Environments</p>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Jakub Michańków (based on materials by Wojciech Hardy </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">May 29, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="1">
    <h2 id="toc-title">Contents</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"><span class="header-section-number">1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#the-problems" id="toc-the-problems" class="nav-link" data-scroll-target="#the-problems"><span class="header-section-number">1.1</span> The problems</a></li>
  <li><a href="#some-solutions" id="toc-some-solutions" class="nav-link" data-scroll-target="#some-solutions"><span class="header-section-number">1.2</span> Some solutions</a></li>
  </ul></li>
  <li><a href="#solutions" id="toc-solutions" class="nav-link" data-scroll-target="#solutions"><span class="header-section-number">2</span> Solutions</a>
  <ul class="collapse">
  <li><a href="#basic-approaches-taking-notes" id="toc-basic-approaches-taking-notes" class="nav-link" data-scroll-target="#basic-approaches-taking-notes"><span class="header-section-number">2.1</span> Basic approaches: taking notes</a></li>
  <li><a href="#helpful-tool-groundhog" id="toc-helpful-tool-groundhog" class="nav-link" data-scroll-target="#helpful-tool-groundhog"><span class="header-section-number">2.2</span> Helpful tool: <code>groundhog</code></a></li>
  <li><a href="#env.-management-renv" id="toc-env.-management-renv" class="nav-link" data-scroll-target="#env.-management-renv"><span class="header-section-number">2.3</span> Env. management: <code>renv</code></a></li>
  <li><a href="#other-tools-anaconda-navigator" id="toc-other-tools-anaconda-navigator" class="nav-link" data-scroll-target="#other-tools-anaconda-navigator"><span class="header-section-number">2.4</span> Other tools: Anaconda Navigator</a></li>
  </ul></li>
  <li><a href="#operating-system-and-other-dependencies" id="toc-operating-system-and-other-dependencies" class="nav-link" data-scroll-target="#operating-system-and-other-dependencies"><span class="header-section-number">3</span> Operating system and other dependencies</a>
  <ul class="collapse">
  <li><a href="#larger-solutions-e.g.-docker" id="toc-larger-solutions-e.g.-docker" class="nav-link" data-scroll-target="#larger-solutions-e.g.-docker"><span class="header-section-number">3.1</span> Larger solutions, e.g.: Docker</a></li>
  </ul></li>
  <li><a href="#sharing-data" id="toc-sharing-data" class="nav-link" data-scroll-target="#sharing-data"><span class="header-section-number">4</span> Sharing data</a>
  <ul class="collapse">
  <li><a href="#zenodo" id="toc-zenodo" class="nav-link" data-scroll-target="#zenodo"><span class="header-section-number">4.1</span> Zenodo</a></li>
  <li><a href="#vagrant" id="toc-vagrant" class="nav-link" data-scroll-target="#vagrant"><span class="header-section-number">4.2</span> Vagrant</a></li>
  <li><a href="#cloud-solutions" id="toc-cloud-solutions" class="nav-link" data-scroll-target="#cloud-solutions"><span class="header-section-number">4.3</span> Cloud solutions</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<section id="the-problems" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="the-problems"><span class="header-section-number">1.1</span> The problems</h2>
<p>We have previously learned how to store our codes, data, documentation using version control.</p>
<p>This allows us to go back to any of the previous versions of what we’ve created at any given moment.</p>
<p>However, our codes depend on other variables like package and R versions. Not keeping track of the environment can get us into trouble:</p>
<ol type="1">
<li><p>Old code might not work or produce different results.</p></li>
<li><p>Colleagues unable to achieve the same results despite (seemingly) using the same code.</p></li>
</ol>
<p>You can find some staggering examples <a href="http://datacolada.org/95">here</a> or <a href="http://datacolada.org/100">here</a>.</p>
</section>
<section id="some-solutions" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="some-solutions"><span class="header-section-number">1.2</span> Some solutions</h2>
<p>For full reproducibility we might:</p>
<ul>
<li><p>use a fixed environment (one that anyone can access).</p></li>
<li><p>have a jointly managed environment (e.g.&nbsp;by admins in a firm).</p></li>
<li><p>record what we’re using and share it with others.</p></li>
</ul>
<p><a href="https://solutions.posit.co/envs-pkgs/environments/">Read more about the general approaches</a></p>
</section>
</section>
<section id="solutions" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Solutions</h1>
<section id="basic-approaches-taking-notes" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="basic-approaches-taking-notes"><span class="header-section-number">2.1</span> Basic approaches: taking notes</h2>
<p>Sometimes Session Info is all we need:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Or for a quick export:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span>(<span class="at">file=</span><span class="st">"session_info.txt"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">sessionInfo</span>()</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">sink</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>In Python, a more elaborate way of handling this could be <a href="https://note.nkmk.me/en/python-pip-install-requirements/">through <code>requirements.txt</code></a>.</p>
<p>This information can be also included in the documentation (e.g.&nbsp;the Readme.md file).</p>
</section>
<section id="helpful-tool-groundhog" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="helpful-tool-groundhog"><span class="header-section-number">2.2</span> Helpful tool: <code>groundhog</code></h2>
<p>see: <a href="http://datacolada.org/95">[1]</a><a href="http://datacolada.org/100">[2]</a><a href="https://groundhogr.com/">[3]</a></p>
<p><code>install.packages("groundhog")</code></p>
<section id="groundhog-allows-to-load-versions-form-a-particular-time" class="level4">
<h4 class="anchored" data-anchor-id="groundhog-allows-to-load-versions-form-a-particular-time"><code>groundhog</code> allows to load versions form a particular time</h4>
<p>So previously we did this:</p>
<p><code>library(dplyr)</code></p>
<p><code>library(stringr)</code></p>
<p>And now we can, instead, do this:</p>
<p><code>library("groundhog")</code></p>
<p><code>pkgs &lt;- c("rvest", "stringi")</code></p>
<p><code>groundhog.library(pkgs, date = "2021-09-01")</code></p>
</section>
<section id="pros-and-cons" class="level4">
<h4 class="anchored" data-anchor-id="pros-and-cons">Pros and cons</h4>
<p>The advantages:</p>
<ul>
<li><p>It’s easy to retrofit your older code</p></li>
<li><p>It’s quick</p></li>
<li><p><code>groundhog</code> installs the appropriate versions without overwriting others.</p></li>
<li><p>if they’re already there, it just loads up the appropriate one.</p></li>
<li><p>it also installs dependencies from that date.</p></li>
<li><p>no additional files and no project needed!</p></li>
</ul>
<p>Disadvantages:</p>
<ul>
<li>What if it’s a mix of older/newer packages?</li>
</ul>
</section>
</section>
<section id="env.-management-renv" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="env.-management-renv"><span class="header-section-number">2.3</span> Env. management: <a href="https://rstudio.github.io/renv/articles/renv.html"><code>renv</code></a></h2>
<p><code>renv</code> is the R package for reproducible environments (check <a href="https://virtualenv.pypa.io/en/latest/"><code>virtualenv</code></a> or <a href="https://pipenv.pypa.io/en/latest/"><code>pipenv</code></a> for pretty much the same stuff in Python; also <a href="https://towardsdatascience.com/reproducible-data-science-with-conda-48f9de6eabd5">managing environments in Conda</a>).</p>
<p>Normally, R looks for the most recent packages in its core folder:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.libPaths</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s initialise a reproducible environment setting though:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">init</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You can then take a look at the new folder <code>renv</code> and <code>renv.lock</code> file (e.g.&nbsp;in notepad).</p>
<section id="whats-going-on" class="level4">
<h4 class="anchored" data-anchor-id="whats-going-on">What’s going on</h4>
<p><code>renv</code> creates a library set that is specific for our project. In terms of how it works later on, it tells R to first look for packages in this new folder, and only then globally:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">.libPaths</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>And we store different versions of packages here than we do globally.</p>
<p>Side note: <code>renv</code> was partially meant as a replacement to the <code>packrat</code> package. You can migrate from the <code>packrat</code> to <code>renv</code> format with a <code>migrate()</code> function.</p>
</section>
<section id="what-if-we-upgrade-something" class="level4">
<h4 class="anchored" data-anchor-id="what-if-we-upgrade-something">What if we upgrade something?</h4>
<p>Let’s find us an out-of-date package:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(<span class="fu">old.packages</span>())</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"highr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Take a look at the contents of <code>renv.lock</code>. Let’s update this.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">snapshot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Great! But what if our code broke after the update?</p>
</section>
<section id="reverting-environments" class="level4">
<h4 class="anchored" data-anchor-id="reverting-environments">Reverting environments</h4>
<p>The <code>renv</code> package can take a look at the Git version control system that stores previous commits. We can use it to revert to a prior version of <code>renv.lock</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">history</span>()</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">revert</span>(<span class="at">commit =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Let’s see what happened:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">status</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>We have a new version of the package but the lockfile uses an older one. Let’s restore it.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>renv<span class="sc">::</span><span class="fu">restore</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="other-tools-anaconda-navigator" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="other-tools-anaconda-navigator"><span class="header-section-number">2.4</span> Other tools: Anaconda Navigator</h2>
<p>Comes with Anaconda installation (Miniconda + <code>conda install anaconda-navigator</code> is enough).</p>
<p>Easy to operate from the prompt (e.g.&nbsp;<code>conda activate renv1</code>). Here’s <a href="https://conda.io/projects/conda/en/latest/user-guide/cheatsheet.html">a cheatsheet</a> (it’s not long).</p>
<p>Also has a GUI in a desktop app.</p>
<p>You can: create new environments, export them (in .yml files!), import them, switch between them.</p>
<p>You switch between them and can install differing software and package versions, as well as add specific apps, etc.</p>
<p>These distinct environments can be run simultaneously without collision.</p>
</section>
</section>
<section id="operating-system-and-other-dependencies" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Operating system and other dependencies</h1>
<p>Reproducibility might also depend on:</p>
<ul>
<li><p>the operating system,</p></li>
<li><p>operating system libraries,</p></li>
<li><p>drivers and other dependencies.</p></li>
</ul>
<section id="larger-solutions-e.g.-docker" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="larger-solutions-e.g.-docker"><span class="header-section-number">3.1</span> Larger solutions, e.g.: Docker</h2>
<p>Docker creates and manages mini-environments configured for specific applications.</p>
<p>Key components:</p>
<ol type="1">
<li><p>Dockerfile (a configuration file with details on the environment)</p></li>
<li><p>Image (an executable package built based on the Dockerfile)</p></li>
<li><p>Container (a running instance of the image; can be stopped/removed)</p></li>
</ol>
<section id="docker-files" class="level4">
<h4 class="anchored" data-anchor-id="docker-files">Docker files</h4>
<p>Can include information such as:</p>
<ul>
<li><p>Operating system</p></li>
<li><p>Software version</p></li>
<li><p>Libraries, dependencies and their versions</p></li>
<li><p>Other environment configuration</p></li>
<li><p>Starting commands</p></li>
</ul>
</section>
<section id="docker-images" class="level4">
<h4 class="anchored" data-anchor-id="docker-images">Docker images</h4>
<p>Once prepared, can be:</p>
<ul>
<li><p>Used to run many containers</p></li>
<li><p>Shared with others</p></li>
<li><p>Kept in repositories such as Docker Hub for collaborative purposes</p></li>
</ul>
</section>
<section id="containers" class="level4">
<h4 class="anchored" data-anchor-id="containers"><a href="https://docs.docker.com/get-started/">Containers</a></h4>
<ul>
<li><p>Can be started, stopped, restarted, removed, etc.</p></li>
<li><p>Can be run on local machines, virtual machines, deployed to the cloud</p></li>
<li><p>Are portable (work on any OS)</p></li>
<li><p>Are isolated (rely on their own software, binaries, and configurations)</p></li>
</ul>
</section>
<section id="preparing-dockerfiles" class="level4">
<h4 class="anchored" data-anchor-id="preparing-dockerfiles">Preparing dockerfiles</h4>
<p>Use existing ones</p>
<p>or</p>
<p><a href="https://docs.docker.com/develop/develop-images/dockerfile_best-practices/">Write them by hand</a></p>
<p>or</p>
<p>Use packages for support, e.g.&nbsp;<a href="https://github.com/ThinkR-open/dockerfiler">dockerfiler</a></p>
</section>
</section>
</section>
<section id="sharing-data" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Sharing data</h1>
<p>Sometimes our data is a product in itself and we might want to share it. Project repositories are not always suitable for that:</p>
<ul>
<li>they do not treat your project as a publication</li>
<li>they do not offer too much storage space</li>
</ul>
<p>Enter <a href="https://www.re3data.org/">data repositories</a>. Some of the data repositories are commercially oriented, while others boost open science.</p>
<p><img src="Open_Science_Principles.png" class="img-fluid"> <a href="https://coderefinery.github.io/reproducible-research/sharing/">Source</a></p>
<p>Also: storing your outputs in a proper repository can help get you citations.</p>
<section id="zenodo" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="zenodo"><span class="header-section-number">4.1</span> Zenodo</h2>
<p>One example of a data repository is Zenodo. Initially funded by the European Commission as part of a Horizon 2020 project of the OpenAIRE consortium. It succeeded the “OpenAIRE Orphan Records Repository”. Currently operated by CERN (European Organization for Nuclear Research).</p>
<p>Zenodo:</p>
<ul>
<li>caters to researchers who need a repository for their data.</li>
<li>allows files of up to 50GB (you can have multiple datasets), but larger files can be negotiated.</li>
<li>you get a Digital Object Identifier (DOI): one for each specific version, one for the object in all its versions.</li>
<li>this makes it easy to cite.</li>
<li>you can sync this with a GitHub repository.</li>
</ul>
<p><a href="https://help.zenodo.org/">Read more here</a>.</p>
<p>The name comes from Zenodotus, which is actually quite interesting!</p>
<p>Zenodotus was a Greek scholar and librarian at the Library of Alexandria, circa 280 BC.</p>
<p>He’s the father of metadata! He introduced:</p>
<ul>
<li><p>classification (materials were assigned to rooms based on subject matter - e.g.&nbsp;verse or prose, literary or scientific)</p></li>
<li><p>ordering (alphabetically by author)</p></li>
<li><p>tags with metadata (to avoid having to unscroll everything just to find what’s inside…)</p></li>
</ul>
<p>You can play around with <a href="https://zenodo.org/">Zenodo</a> using its official clone made for testing - the <a href="https://sandbox.zenodo.org/">Sandbox Zenodo</a>.</p>
<p>Of course, there are <a href="(https://www.re3data.org/)">numerous other data repositories</a>, including country-specific ones.</p>
</section>
<section id="vagrant" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="vagrant"><span class="header-section-number">4.2</span> Vagrant</h2>
<p>Vagrant is an open-source tool that simplifies the management and deployment of virtualized development environments. By providing a consistent workflow, Vagrant ensures that development environments are easily reproducible and portable across different platforms. It is particularly useful for developers working in teams, as it helps avoid the “it works on my machine” problem by standardizing the setup.</p>
<p>Before using Vagrant, you need to install two main components:</p>
<ul>
<li>Virtualization software: Common choices are VirtualBox or VMware.</li>
<li>Vagrant: Download and install from their website.</li>
</ul>
<section id="initializing-a-vagrant-project" class="level4">
<h4 class="anchored" data-anchor-id="initializing-a-vagrant-project">Initializing a Vagrant Project:</h4>
<p>Navigate to your project directory and run <code>vagrant init</code></p>
<p>This command creates a <code>Vagrantfile</code> in your directory, which is used to configure the virtual environment.</p>
</section>
<section id="configuring-the-vagrantfile" class="level4">
<h4 class="anchored" data-anchor-id="configuring-the-vagrantfile">Configuring the Vagrantfile:</h4>
<p>Edit the Vagrantfile to specify the desired operating system and configuration. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Vagrant.configure</span>(<span class="st">"2"</span>) do <span class="sc">|</span>config<span class="sc">|</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  config.vm.box <span class="ot">=</span> <span class="st">"ubuntu/bionic64"</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>end</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="starting-the-virtual-machine" class="level4">
<h4 class="anchored" data-anchor-id="starting-the-virtual-machine">Starting the Virtual Machine:</h4>
<p>To create and start the VM, run <code>vagrant up</code>. This command downloads the specified box (if not already downloaded) and starts the virtual machine.</p>
</section>
<section id="accessing-the-virtual-machine" class="level4">
<h4 class="anchored" data-anchor-id="accessing-the-virtual-machine">Accessing the Virtual Machine:</h4>
<p>SSH into the VM using <code>vagrant ssh</code></p>
</section>
<section id="managing-the-virtual-machine" class="level4">
<h4 class="anchored" data-anchor-id="managing-the-virtual-machine">Managing the Virtual Machine:</h4>
<p><code>vagrant suspend</code> to pause the machine, <code>vagrant halt</code> to shut it down, <code>vagrant destroy</code> stops and deletes all traces of the VM, allowing you to start fresh with <code>vagrant up</code>.</p>
<p>If you edit the <code>Vagrantfile</code> you can use <code>vagrant reload</code> to restart it with new settings.</p>
</section>
</section>
<section id="cloud-solutions" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="cloud-solutions"><span class="header-section-number">4.3</span> Cloud solutions</h2>
<p>AWS, Azure, Google Cloud, Github Codespaces… and many many more.</p>
<section id="aws-instances" class="level4">
<h4 class="anchored" data-anchor-id="aws-instances">AWS Instances:</h4>
<p>AWS (Amazon Web Services) instances are virtual servers that run applications in the AWS cloud. They are a core component of Amazon Elastic Compute Cloud (EC2) and allow:</p>
<ul>
<li>Scalability: Easily scale up or down based on demand.</li>
<li>Variety of Instance Types: Different types optimized for compute, memory, storage, and GPU needs.</li>
<li>Pay-as-You-Go Pricing: Pay only for the compute capacity you use.</li>
</ul>
<p>In addition with other AWS services you can create very powerful environments that can serve various purposes.</p>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="Reproducible Environments_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>